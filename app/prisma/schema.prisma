generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model masjid {
  id              BigInt            @id @default(autoincrement())
  nama_masjid     String
  nama_ketua_dkm  String
  no_hp           String
  jemaah          jemaah[]
  jumatan         jumatan[]
  masjid_mubaligh masjid_mubaligh[]
  pengajian       pengajian[]
}

model mubaligh {
  id              BigInt            @id @default(autoincrement())
  nama_mubaligh   String
  no_hp           String
  jumatan         jumatan[]
  masjid_mubaligh masjid_mubaligh[]
  pengajian       pengajian[]
}

model pengajian {
  id          BigInt   @id @default(autoincrement())
  tanggal     DateTime @db.Date
  waktu       String
  id_masjid   BigInt
  id_mubaligh BigInt
  masjid      masjid   @relation(fields: [id_masjid], references: [id], onDelete: Cascade, onUpdate: NoAction)
  mubaligh    mubaligh @relation(fields: [id_mubaligh], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model template {
  id            BigInt @id @default(autoincrement())
  nama_template String @unique
  content       String
}

model user {
  id       String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  username String @unique
  password String
}

model jemaah {
  id        BigInt @id @default(autoincrement())
  no_hp     String
  id_masjid BigInt
  masjid    masjid @relation(fields: [id_masjid], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model jumatan {
  id          BigInt   @id @default(autoincrement())
  tanggal     DateTime @db.Timestamptz(6)
  id_masjid   BigInt
  id_mubaligh BigInt
  masjid      masjid   @relation(fields: [id_masjid], references: [id], onDelete: Cascade, onUpdate: NoAction)
  mubaligh    mubaligh @relation(fields: [id_mubaligh], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model masjid_mubaligh {
  id_masjid   BigInt
  id_mubaligh BigInt
  masjid      masjid   @relation(fields: [id_masjid], references: [id], onDelete: Cascade, onUpdate: NoAction)
  mubaligh    mubaligh @relation(fields: [id_mubaligh], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([id_masjid, id_mubaligh])
}
